<!DOCTYPE html>
<html>
<head>
	<title>Matrix Multiplication</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	<h1>Matrix Multiplication</h1>
	<a href="HTMLPage1.html">Go back to home page</a>
	<p>Please enter the size of the matrices to multiply: </p>
	<form>
		Matrix 1 Rows: <br> <input type="number" id="row1" name="row1">
		<br>
		Matrix 1 Columns: <br> <input type="number" id="col1" name="col1">
		<br>
		Matrix 2 Rows: <br> <input type="number" id="row2" name="row2">
		<br>
		Matrix 2 Columns: <br> <input type="number" id="col2" name="col2">
		<br>
		<input type="button" value="Create Matrices" onclick="createMatrixInputs()">
		<input type="button" value="Need help" onclick="explainCalculator()">
	</form>

	
	<div id="matrices"></div>
	<div id="result"></div>
	<div id="solutionCheck"></div>

	<script>
		// REMAINING USER STORIES TO IMPLEMENT: 4, 7, 9. ALSO UPDATE GRAPHICS

		//Global variables to hold matrix inputs
		let matrix1 = [];
		let matrix2 = [];
		let matrix3 = [];

		// Function to display how to use calculator when need help is clicked
		function explainCalculator() {
			let matricesDiv = document.getElementById("matrices");
			matricesDiv.innerHTML = "";

			let text = document.createTextNode('To use this calculator, please input the size of two different matrices. Note that matrix 1 columns should be equal to matrix 2 rows. Next, click the create matrices button. This will allow you to input values for each matrix entry. You then have the option to either show the solution, guess the solution yourself, or get a walkthrough of the solution.')
			matricesDiv.appendChild(text);
		
		}

		// Function to create matrix input boxes
		function createMatrixInputs() {
			let matricesDiv = document.getElementById("matrices");
			matricesDiv.innerHTML = "";
			let text = document.createTextNode('Input Matrices Here: ');
			matricesDiv.appendChild(text);
			matricesDiv.appendChild(document.createElement("br"));

			let row1 = document.getElementById("row1").value;
			let col1 = document.getElementById("col1").value;
			let row2 = document.getElementById("row2").value;
			let col2 = document.getElementById("col2").value;
			
			// Check that matrices are compatible
			if ((col1 != row2) || (col1 < 1) || (row1 < 1) || (col2 < 1) || (row2 < 1)) {
				alert("Matrices cannot be multiplied, Matrix 1 Columns must equal Matrix 2 Rows");
				return;
			}
			
			// Create empty matrices
			matrix1 = [];
			matrix2 = [];
		

			let i, j;
			
			// Add input boxes for first matrix
			for (i = 0; i < row1; i++) {
				matrix1.push([]);
				for (j = 0; j < col1; j++) {
					let input = document.createElement("input");
					input.type = "number";
					input.name = "matrix1-" + i + "-" + j;
					input.value = 0;
					matricesDiv.appendChild(input);
					matrix1[i][j] = input;
				}
				matricesDiv.appendChild(document.createElement("br"));
			}

			matricesDiv.appendChild(document.createElement("br"));

			// Add input boxes for second matrix
			for (i = 0; i < row2; i++) {
				matrix2.push([]);
				for (j = 0; j < col2; j++) {
					let input = document.createElement("input");
					input.type = "number";
					input.name = "matrix2-" + i + "-" + j;
					input.value = 0;
					matricesDiv.appendChild(input);
					matrix2[i][j] = input;
				}
				matricesDiv.appendChild(document.createElement("br"));
			}

			// Add a button to multiply the two matrices
			var button = document.createElement("input");
			button.type = "button";
			button.value = "Solve Multiplication";
			button.onclick = function() {doMultiplication()};
			matricesDiv.appendChild(button);

			// Add a button to submit a guess for the answer
			var button2 = document.createElement("input");
			button2.type = "button";
			button2.value = "Guess Solution"
			button2.onclick = function() {guessSolution()};
			matricesDiv.appendChild(button2);

			// Add a button to walkthrough solution
			var button3 = document.createElement("input");
			button3.type = "button";
			button3.value = "Walkthrough Solution";
			button3.onclick = function() {walkthroughMultiplication()};
			matricesDiv.appendChild(button3);

			// Add a button to clear input boxes
			var button4 = document.createElement("input");
			button4.type = "button";
			button4.value = "Clear Input";
			button4.onclick = function() {createMatrixInputs()};
			matricesDiv.appendChild(button4);
		}

		// Function to multiply two matrices and print the result
		function doMultiplication() {
			let checkDiv = document.getElementById("solutionCheck");
			checkDiv.innerHTML = "";
			let i, j;

			let rows1 = matrix1.length;
			let cols1 = matrix1[0].length;
			let rows2 = matrix2.length;
			let cols2 = matrix2[0].length;
			
			
			let resultDiv = document.getElementById("result");
			resultDiv.innerHTML = "";
			let text = document.createTextNode('Result: ');
			resultDiv.appendChild(text);
			resultDiv.appendChild(document.createElement("br"));


			// Get values from input boxes and put into matrices
			inputMat1 = []
			for (i = 0; i < rows1; i++) {
				inputMat1.push([])
				for (j = 0; j < cols1; j++) {
					inputMat1[i][j] = matrix1[i][j].value
				}
			}
			
			inputMat2 = []
			for (i = 0; i < rows2; i++) {
				inputMat2.push([])
				for (j = 0; j < cols2; j++) {
					inputMat2[i][j] = matrix2[i][j].value
				}
			}

			// Run the multiply function
			let result = multiply(inputMat1, inputMat2);
			
			// Add the matrix values to a table and add to document
			let table = document.createElement("table");
			

			for (i = 0; i < rows1; i++) {
				let row = document.createElement("tr");
				for (j = 0; j < cols2; j++) {
					let cell = document.createElement("td");
					cell.innerText = result[i][j];
					row.appendChild(cell);
				}
				table.appendChild(row);
			}

			resultDiv.appendChild(table);
		}





		// Function to allow the user to input a guess at the solution
		function guessSolution() {
			let checkDiv = document.getElementById("solutionCheck");
			checkDiv.innerHTML = "";

			let i, j;
			// Get matrix sizes
			let rows1 = matrix1.length;
			let cols1 = matrix1[0].length;
			let rows2 = matrix2.length;
			let cols2 = matrix2[0].length;
			
			// Give variable to the div and display text
			let resultDiv = document.getElementById("result");
			resultDiv.innerHTML = "";
			let text = document.createTextNode('Input guess here (Please round to 3 decimal places): ');
			resultDiv.appendChild(text);
			resultDiv.appendChild(document.createElement("br"));

			// Create empty matrix for input
			matrix3 = [];
			
			// Add input boxes for solution matrix
			for (i = 0; i < rows1; i++) {
				matrix3.push([]);
				for (j = 0; j < cols2; j++) {
					let input = document.createElement("input");
					input.type = "number";
					input.name = "matrixg-" + i + "-" + j;
					input.value = 0;
					resultDiv.appendChild(input);
					matrix3[i][j] = input;
				}
				resultDiv.appendChild(document.createElement("br"));
			}

			// Get values from original input boxes and put into matrices
			inputMat1 = []
			for (i = 0; i < rows1; i++) {
				inputMat1.push([])
				for (j = 0; j < cols1; j++) {
					inputMat1[i][j] = matrix1[i][j].value
				}
			}
			
			inputMat2 = []
			for (i = 0; i < rows2; i++) {
				inputMat2.push([])
				for (j = 0; j < cols2; j++) {
					inputMat2[i][j] = matrix2[i][j].value
				}
			}

			// Run the multiply function to get correct solution
			let result = multiply(inputMat1, inputMat2);

			// Add button to check solution
			var button = document.createElement("input");
			button.type = "button";
			button.value = "Check Solution"
			button.onclick = function() {checkSolution(result)};
			resultDiv.appendChild(button);

			// Add a button to clear input boxes
			var button2 = document.createElement("input");
			button2.type = "button";
			button2.value = "Clear Input";
			button2.onclick = function() {guessSolution()};
			resultDiv.appendChild(button2);
		
		}


		// Function to check the solution given
		function checkSolution(correctMatrix) {
			let checkDiv = document.getElementById("solutionCheck");
			checkDiv.innerHTML = "";

			// Get size of solution matrix
			let rows1 = correctMatrix.length;
			let cols1 = correctMatrix[0].length;

			let i, j;

				
			let correctSolution = true;

			for (i = 0; i < rows1; i++) {
				for (j = 0; j < cols1; j++) {
					if ((Math.round(matrix3[i][j].value * 1000) / 1000) != (Math.round(correctMatrix[i][j] * 1000) / 1000)) {
						correctSolution = false;
					}
				}
			}
			
			if (correctSolution == true) {
				let text = document.createTextNode('Correct Solution!');
				checkDiv.appendChild(text);
			}
			else {
				let text = document.createTextNode('Incorrect Solution!');
				checkDiv.appendChild(text);
			}
		}


		// Function to waklthrough multiplication  --- NEEDS TO BE FINISHED
		function walkthroughMultiplication() {
			
		
		}

	</script>

	<script src="multiplication.js"> </script>

</body>
</html>
